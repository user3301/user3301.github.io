---
layout: post
title: "Understanding Public Key Infrastructure"
date: 2019-11-05
excerpt: "Cryptography"
tags: [PKI, Cryptography]
feature: http://ww1.sinaimg.cn/large/6b1abb29gy1fgryzol04kj21z41b84df.jpg
comments: true
---

# Cryptography
It is secure communication in the presence of third parties.

## Goals of Cryptography

* Confidentiality - content is encrypted
* Data Integrity - content is not altered in transit
* Non-repudiation - sender of message cannot deny he did not send it at a later time
* Authentication - able to prove their ID to others

## Encryption Methods

* Symmetric Encryption - use same key to encrypt and decrypt, how to exchange key in a secure way would be a problem
  
    eg:  DES(Data Encryption Standard), 3DES, IDEA(International Data Encryption Algorithm), CAST, RC2,RC4,RC5,RC6, AES, Blowfish
* Asymmetric Encryption (aka Public Key Encrpytion)
  
    eg: RSA, DSA, ECC
* Hybrid Cryptography - the encryption and decryption algoritm used in `real world`

    - Asymmetric encryption is used to encrypt the shared key for symmetric encrpytion algorithm used to encryt the message
    - symmetric encrpytion is used to encrypt message
  
  ## Hash Functions & Digital Signatures
Hash is typically used to verify that a certain item has not been modified by providing a `digest` (or `fingerprint`)

How hashing works

![hashing](./assets.img/../../assets/img/hash-comparison-digital-signature.png)

### Characteristics of Digital Signatures
* Identification - the recipient can be sure of who send the message
* Integrity - recipient of a signed message can check it to make sure the message was not tampered
* Reliability/non-Repudiation - verify the sender truly sent the message with `digital signature`
  
# PKI

## Digital Certificate
Digital credentials comparable to digital ID or digital passport.

## Certificate Authorities (CA)
CA is a machine which issues corticates to different entities(users, computers, network devices etc)

![ca-hierarchy](./assets/img/../../../assets/img/ca-hierarchy.png)

Reasons for hierarchies
  
  * Security
  * Mapping trust 
  * Manageability - role separation
  * Flexibility - CA can be repleced easily for different levels of PKI

# Certificate Revocation and Chain Building
Digital Certificate normally expires after 1 year. In some situation might cause a certifcate to be revoked before its expiration due to:

* Certificate is no longer used
* Details of certificate are changed
* The certificate owner's private key was compromised
  
## Certificate Revocation List (CRL)

## Revocation Cache

### Disk Cache
Maintains copies of all CRL and OCSP responses retrieved; 

Items are maintained until their validity period expires;

### Memory Cahce
Contains revocation information used by a specific process;

Maintained within the memory used by the calling process;

## Online Certificate Status Protocol(OCSP)


# Deploy a Two-Tier PKI Hierarchy

## PKI Objects in AD
A PKI has no relationship to any AD, but when installing an AD integrated CA, AD will be used to store PKI related information that can be used by clients

related Information to AD Container

* AIA - Authority Information Access
* CDP - CRL Distrubution Points
* Certificate Templates
* Certification Authorities
* Enrollment Services
* KRA
* OID
* NTAuthCertificates
  
## Certificate Stores
Logical containers, holding one or more certificates;
logical view is comprised of the certificated from each of the physical certificate stores on the computer;
